<!doctype html>
<html>
	<head>
		<title>Wikimirs</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="css/bootstrap-notify.css" rel="stylesheet">
	</head>
	<body>
	<div style="text-align: center;">
		<div>
			<input type="text" id="query" name="query"></input>
			<button id="search">Search</button>
		</div>
		<div id="box" style="width:300px;overflow: auto;text-align: center;margin-left:auto;margin-right:auto;">
			<div id="query_formula"></div>
		</div>
	</div>
	$$ e^{ia}=\cos \left(a\right)+i\sin \left(a\right) $$
	$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$
	
<!DOCTYPE math SYSTEM "http://www.w3.org/Math/DTD/mathml3/mathml3.dtd">	
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
   <msub>
      <mi>s</mi>
      <mi>n</mi>
   </msub>
   <mfenced close=")" open="(">
      <mi>T</mi>
   </mfenced>
   <mo>=</mo>
   <mi>inf</mi>
   <mrow>
      <mo>{</mo>
      <mrow>
         <mspace width="0.167em"/>
         <mo>&shortparallel;</mo>
         <mi>T</mi>
         <mo>-</mo>
         <mi>L</mi>
         <mo>&shortparallel;</mo>
         <mi>:</mi>
         <mi>L</mi>
         <mrow>
            <mi>i</mi>
            <mi>s</mi>
            <mi>a</mi>
            <mi>n</mi>
            <mi>o</mi>
            <mi>p</mi>
            <mi>e</mi>
            <mi>r</mi>
            <mi>a</mi>
            <mi>t</mi>
            <mi>o</mi>
            <mi>r</mi>
            <mi>o</mi>
            <mi>f</mi>
            <mi>f</mi>
            <mi>i</mi>
            <mi>n</mi>
            <mi>i</mi>
            <mi>t</mi>
            <mi>e</mi>
            <mi>r</mi>
            <mi>a</mi>
            <mi>n</mi>
            <mi>k</mi>
         </mrow>
         <mo>&lt;</mo>
         <mi>n</mi>
         <mspace width="0.167em"/>
         <mo>}</mo>
      </mrow>
      <mo>.</mo>
   </mrow>
</math>




	<div class='notifications top-center'></div>
	</body>
	<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/bootstrap-notify.js"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/javascript">
	$(function() {
		$("#search").click(function() {
			var query = $("#query").val();
			renderQuery(query);
			search(query, 1);
		});
	});
	
	function renderQuery(query) {
		$("#query_formula").text("$$ " + query + " $$");
		MathJax.Hub.Queue(["Typeset",MathJax.Hub,"query_formula"]);
	}
	
	function search(query, page) {
		var url = "search?q=" + encodeURIComponent(query) + "&page=" + page;
		$.get(url, function(data) {
			console.log(data)
			if (data.status == "OK") {
				renderSearchResult(data.result);
			}
			else {
				error("Request Failed: " + data.status);
			}
		}).fail(function( jqxhr, textStatus, error ) {
		  var err = textStatus + ', ' + error;
		  error("Request Failed: " + err);
		});
	}
	
	function error(error) {
		$('.top-center').notify({
				type: "error",
				message: { text: error }
			}).show();
		console.log(error);
	}
	
	function renderSearchResult(result) {
		if(result.length == 0) {
			renderEmptyResult();
		}
		else {
			// TODO
			alert(result);
		}
	}
	
	function renderEmptyResult() {
		// TODO
	}
	</script>
</html>